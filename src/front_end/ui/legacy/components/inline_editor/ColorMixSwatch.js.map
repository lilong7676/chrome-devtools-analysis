{"version":3,"file":"ColorMixSwatch.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/inline_editor/ColorMixSwatch.ts"],"names":[],"mappings":"AAAA,gEAAgE;AAChE,yEAAyE;AACzE,6BAA6B;AAE7B,OAAO,KAAK,MAAM,MAAM,mCAAmC,CAAC;AAC5D,OAAO,KAAK,gBAAgB,MAAM,wCAAwC,CAAC;AAC3E,OAAO,KAAK,OAAO,MAAM,+BAA+B,CAAC;AAEzD,OAAO,oBAAoB,MAAM,yBAAyB,CAAC;AAE3D,MAAM,OAAO,cAAe,SAAQ,WAAW;IAC7C,MAAM,CAAU,UAAU,GAAG,OAAO,CAAC,OAAO,CAAA,2BAA2B,CAAC;IACvD,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,EAAC,IAAI,EAAE,MAAM,EAAC,CAAC,CAAC;IACpD,IAAI,GAAW,oCAAoC,CAAC;IACpD,cAAc,GAAW,SAAS,CAAC;IACnC,eAAe,GAAW,OAAO,CAAC;IAE1C;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,MAAM,CAAC,kBAAkB,GAAG;YAC/B,oBAAoB;SACrB,CAAC;IACJ,CAAC;IAED,OAAO,CAAC,IAAY;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEjB,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,mEAAmE,CAAC,CAAC;QACxG,IAAI,CAAC,eAAe,IAAI,CAAC,eAAe,CAAC,MAAM,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;YAC/E,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,OAAO;SACR;QAED,MAAM,uBAAuB,GAAG,eAAe,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QACrE,MAAM,wBAAwB,GAAG,eAAe,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAEvE,MAAM,eAAe,GAAG,uBAAuB,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC1E,IAAI,CAAC,eAAe,EAAE;YACpB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,OAAO;SACR;QAED,MAAM,gBAAgB,GAAG,wBAAwB,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC5E,IAAI,CAAC,gBAAgB,EAAE;YACrB,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,OAAO;SACR;QAED,IAAI,CAAC,cAAc,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;QACzC,IAAI,CAAC,eAAe,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;QAE3C,IAAI,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAED,eAAe;QACb,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;IACvD,CAAC;IAED,OAAO;QACL,qDAAqD;QACrD,mBAAmB;QAEnB,iHAAiH;QACjH,kEAAkE;QAClE,8GAA8G;QAC9G,2BAA2B;QAC3B,OAAO,CAAC,MAAM,CACZ,OAAO,CAAC,IAAI,CAAA;yEACuD,IAAI,CAAC,cAAc;0EAClB,IAAI,CAAC,eAAe;0EACpB,IAAI,CAAC,IAAI;oBAC/D,IAAI,CAAC,IAAI,SAAS,EAChC,IAAI,CAAC,MAAM,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAC;QAC7B,kBAAkB;IACpB,CAAC;;AAGH,gBAAgB,CAAC,cAAc,CAAC,eAAe,CAAC,2BAA2B,EAAE,cAAc,CAAC,CAAC","sourcesContent":["// Copyright (c) 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as ComponentHelpers from '../../../components/helpers/helpers.js';\nimport * as LitHtml from '../../../lit-html/lit-html.js';\n\nimport colorMixSwatchStyles from './colorMixSwatch.css.js';\n\nexport class ColorMixSwatch extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-color-mix-swatch`;\n  private readonly shadow = this.attachShadow({mode: 'open'});\n  private text: string = 'color-mix(in srgb, hotpink, white)';\n  private firstColorText: string = 'hotpink';\n  private secondColorText: string = 'white';\n\n  constructor() {\n    super();\n    this.shadow.adoptedStyleSheets = [\n      colorMixSwatchStyles,\n    ];\n  }\n\n  setText(text: string): void {\n    this.text = text;\n\n    const parametersMatch = text.match(/color-mix\\(in\\s+(?:\\w+)\\s*,(?<firstColor>.+),(?<secondColor>.+)\\)/);\n    if (!parametersMatch || !parametersMatch.groups || parametersMatch.length !== 3) {\n      this.#renderTextOnly();\n      return;\n    }\n\n    const firstColorAndPercentage = parametersMatch.groups['firstColor'];\n    const secondColorAndPercentage = parametersMatch.groups['secondColor'];\n\n    const firstColorMatch = firstColorAndPercentage.match(Common.Color.Regex);\n    if (!firstColorMatch) {\n      this.#renderTextOnly();\n      return;\n    }\n\n    const secondColorMatch = secondColorAndPercentage.match(Common.Color.Regex);\n    if (!secondColorMatch) {\n      this.#renderTextOnly();\n      return;\n    }\n\n    this.firstColorText = firstColorMatch[0];\n    this.secondColorText = secondColorMatch[0];\n\n    this.#render();\n  }\n\n  #renderTextOnly(): void {\n    LitHtml.render(this.text, this.shadow, {host: this});\n  }\n\n  #render(): void {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n\n    // Note that we use a <slot> with a default value here to display the color text. Consumers of this component are\n    // free to append any content to replace what is being shown here.\n    // Note also that whitespace between nodes is removed on purpose to avoid pushing these elements apart. Do not\n    // re-format the HTML code.\n    LitHtml.render(\n      LitHtml.html`<div class=\"swatch-icon\">\n        <span class=\"swatch swatch-left\" id=\"swatch-1\" style=\"--color: ${this.firstColorText}\"></span>\n        <span class=\"swatch swatch-right\" id=\"swatch-2\" style=\"--color: ${this.secondColorText}\"></span>\n        <span class=\"swatch swatch-mix\" id=\"mix-result\" style=\"--color: ${this.text}\"></span>\n      </div><slot>${this.text}</slot>`,\n      this.shadow, {host: this});\n    // clang-format on\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-color-mix-swatch', ColorMixSwatch);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-color-mix-swatch': ColorMixSwatch;\n  }\n}\n"]}